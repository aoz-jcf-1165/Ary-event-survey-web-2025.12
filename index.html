<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TSC Event Survey - 2025.12</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --bg-alt: #0b1020;
      --card: #111827;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.2);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --danger: #f97373;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 40px rgba(0,0,0,0.45);
    }
    * { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      padding: 24px 16px 40px;
    }
    .app-shell { width: 100%; max-width: 560px; }
    .card {
      background: linear-gradient(135deg, #020617, #020617 35%, #0b1120);
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.15);
      padding: 18px 18px 22px;
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: -120px;
      opacity: 0.18;
      background:
        radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.4), transparent 55%),
        radial-gradient(circle at 100% 0, rgba(129, 140, 248, 0.4), transparent 55%);
      pointer-events: none;
    }
    .card-inner { position: relative; z-index: 1; }
    header {
      display: flex; align-items: center; justify-content: space-between;
      gap: 8px; margin-bottom: 10px;
    }
    .brand { display: flex; align-items: center; gap: 8px; }
    .brand-logo { width: 48px; height: 40px; border-radius: 50%; overflow: hidden; background: #fff; }
    .brand-logo img { width: 100%; height: 100%; object-fit: cover; display: block; }
    .brand-text-main { font-size: 15px; font-weight: 700; letter-spacing: 0.6px; }
    .brand-text-sub { font-size: 11px; color: var(--text-muted); }
    .lang-select-wrap {
      display: flex; align-items: center; gap: 4px;
      background: rgba(15, 23, 42, 0.8);
      border-radius: 999px; padding: 3px 8px 3px 10px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      max-width: 48%;
    }
    select {
      background: transparent; border: none; color: var(--text-main);
      font-size: 12px; padding: 3px 4px; outline: none; cursor: pointer;
    }

    /* ï¼ˆé€”ä¸­çœç•¥ï¼‰ â€” BODY ã® UI éƒ¨åˆ†ã¯ã‚ãªãŸãŒé€ã£ãŸã¾ã¾å®Œå…¨ä¸€è‡´ */

  </style>
</head>

<body>
  <div class="app-shell">
    <div class="card">
      <div class="card-inner">

        <!-- çœç•¥ï¼šã‚ãªãŸã® original HTML ã¨å…¨ãåŒã˜ -->

      </div>
    </div>
  </div>

<script>
  const API_URL = "https://tsc-survey-api.aozjakz01.workers.dev/";
  const TRANSLATION_FILE = "translations.tsv";

  /* ===== ç¿»è¨³ãªã©ã®æ©Ÿèƒ½ â€” é€ä¿¡éƒ¨åˆ†ä»¥å¤–ã¯ã™ã¹ã¦å…ƒã®ã‚³ãƒ¼ãƒ‰ã®ã¾ã¾ ===== */

  function getRadioValue(name) {
    const node = document.querySelector(`input[name="${name}"]:checked`);
    return node ? node.value : "";
  }

  async function handleSubmit(e) {
    e.preventDefault();

    /* å…¥åŠ›å–å¾—ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå…ƒã®ã‚³ãƒ¼ãƒ‰ãã®ã¾ã¾ï¼‰ */
    const playerName = document.getElementById("playerName").value.trim();
    const q02 = getRadioValue("q02");
    const q03 = getRadioValue("q03");
    const q04 = getRadioValue("q04");

    /* JSON é€ä¿¡æº–å‚™ */
    const timestamp = new Date().toISOString();
    const row = {
      timestamp,
      language: currentLang,
      player_name: playerName,
      Q02_time: q02,
      Q03_time: q03,
      Q04_day: q04
    };

    try {
      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(row)
      });

      const data = await res.json().catch(() => ({}));
      if (!data.ok) {
        setError("form-error", "Server error. Please try again later.");
        return;
      }

      /* ================================
         ğŸŸ¦ æˆåŠŸæ™‚ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å‡¦ç†ã‚’è¿½åŠ 
         ================================ */
      const resultBox = document.getElementById("result");
      if (resultBox) {
        resultBox.style.display = "block";

        // â˜…â˜… è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã“ã“ã«è¿½åŠ ï¼ â˜…â˜…
        resultBox.scrollIntoView({
          behavior: "smooth",
          block: "start"
        });
      }

      document.getElementById("surveyForm").reset();

    } catch (err) {
      setError("form-error", "Network error. Please try again.");
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("surveyForm");
    if (form) form.addEventListener("submit", handleSubmit);
    loadTranslations();
  });
</script>

</body>
</html>
